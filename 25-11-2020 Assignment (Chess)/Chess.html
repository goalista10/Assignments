<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            background-color: rgba(165, 42, 42, 0.5);
            padding: 1%;
            grid-gap: 1%;
            height: 49vw;
            width: 49vw;
        }

        .white {
            background-color: brown;
            opacity: 1;

        }

        .black {
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 1;

        }

        body {
            background-color: white;
            padding: 0;
            margin: auto;
            width: 50%;
            background-image: url('https://image.freepik.com/free-vector/chessboard-perspective-background-vector_57911-3.jpg');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: 100% 100%;
        }

        img {
            width: 100%;
            display: block;
            margin: auto;
        }
    </style>
</head>

<body>

    <h1>Checkmate! </h1>
    <p>White to move</p>
    <p><a href="https://www.reddit.com/r/chess/comments/7bwgvz/beautiful_checkmate_example_from_a_book_i_am/"
            target="_blank">Reddit post</a></p>
    <button onclick="initialize()">Initialize/Reset</button>
    <div class="grid-container">
        <div class="white" id="A1" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkRook1"
                src="darkRook.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="A2" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkKnight1"
                src="darkKnight.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="A3" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkBishop1"
                src="darkBishop.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="A4" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkQueen"
                src="darkQueen.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="A5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkKing"
                src="darkKing.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="A6" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkBishop2"
                src="darkBishop.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="A7" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkKnight2"
                src="darkKnight.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="A8" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkRook2"
                src="darkRook.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="B1" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn1"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="B2" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn2"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="B3" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn3"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="B4" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn4"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="B5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn5"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="B6" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn6"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="B7" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn7"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="B8" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="darkPawn8"
                src="darkPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>

        <div class="white" id="C1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="C2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="C3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="C4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="C5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="C6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="C7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="C8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="D1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="D2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="D3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="D4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="D5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="D6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="D7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="D8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

        <div class="white" id="E1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="E2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="E3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="E4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="E5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="E6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="E7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="E8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="F1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="F2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="F3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="F4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="F5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="F6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="black" id="F7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div class="white" id="F8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

        <div class="white" id="G1" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn1"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="G2" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn2"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="G3" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn3"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="G4" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn4"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="G5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn5"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="G6" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn6"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="G7" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn7"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="G8" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightPawn8"
                src="lightPawn.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="H1" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightRook1"
                src="lightRook.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="H2" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightKnight1"
                src="lightKnight.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="H3" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightBishop1"
                src="lightBishop.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="H4" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightQueen"
                src="lightQueen.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="H5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightKing"
                src="lightKing.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="H6" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightBishop2"
                src="lightBishop.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="black" id="H7" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightKnight2"
                src="lightKnight.svg" draggable="true" ondragstart="drag(event,id)"></div>
        <div class="white" id="H8" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="lightRook2"
                src="lightRook.svg" draggable="true" ondragstart="drag(event,id)"></div>
    </div>

    <script>
        //general variables
        var draggedPiece = "";
        var draggedLoc = "";
        var yAxis = "ABCDEFGH";
        var turnCount = 0;
        //special variable for if target is not a container but a piece
        var targetPiece = "";
        //function specific global variables for castling requirements
        //0 if not moved, 1 if moved
        var darkRook1Castle = 0;
        var darkRook2Castle = 0;
        var darkKingCastle = 0;
        var lightRook1Castle = 0;
        var lightRook2Castle = 0;
        var lightKingCastle = 0;
        //castle code indicates where the rook moves
        var castleCode = "";
        //function specific global variables for en passant
        //0 if have not performed 2 forward steps, 1 if have performed
        var enPassantdarkPawn = [0,0,0,0,0,0,0,0];
        var enPassantlightPawn = [0,0,0,0,0,0,0,0];

        //moves the rook in castling
        function castle() {
            if (castleCode == "H4") {
                document.getElementById(castleCode).appendChild(document.getElementById('lightRook1'));
                lightKingCastle = 1;
            }
            if (castleCode == "H6") {
                document.getElementById(castleCode).appendChild(document.getElementById('lightRook2'));
                lightKingCastle = 1;
            }
            if (castleCode == "A4") {
                document.getElementById(castleCode).appendChild(document.getElementById('darkRook1'));
                darkKingCastle = 1;
            }
            if (castleCode == "A6") {
                document.getElementById(castleCode).appendChild(document.getElementById('darkRook2'));
                darkKingCastle = 1;
            }
            castleCode = "";
        }

        //checks if the rook or king have been moved for castling purposes
        function castling() {
            if (/light/.test(draggedPiece)) {
                if (/Rook/.test(draggedPiece)) {
                    if (/1/.test(draggedPiece)) {
                        lightRook1Castle = 1;
                    } else {
                        lightRook2Castle = 1;
                    }
                } else if(/King/.test(draggedPiece)){
                    lightKingCastle = 1;
                }
            } else {
                if (/Rook/.test(draggedPiece)) {
                    if (/1/.test(draggedPiece)) {
                        darkRook1Castle = 1;
                    } else {
                        darkRook2Castle = 1;
                    }
                } else if(/King/.test(draggedPiece)){
                    darkKingCastle = 1;
                }
            }
        }

        //check if pawn performed an en passant
        function enPassant(loc){
            if (loc[1] == draggedLoc[1] & /Pawn/.test(draggedPiece)) {
                if (draggedLoc[0] == "B" & loc[0] == "D") {
                    enPassantdarkPawn[loc[1] - 1] = 1;
                }
                if(draggedLoc[0] == "G" & loc[0] == "E"){
                    enPassantlightPawn[loc[1] - 1] = 1;
                }
            }
        }

        //checks if en passant conditions are met, returns the piece to be removed when conditions meet
        function enPassantEat(targetID){
            var temp = "";
            var temp2 = "";
            if(draggedLoc[0] == "D"){
                temp = "D" +(draggedLoc[1]-1).toString();
                temp2 = "darkPawn"+(draggedLoc[1]-1).toString();
                if(enPassantdarkPawn[draggedLoc[1]-2] == 1 & document.getElementById(temp2).parentElement.id == temp){
                    if(targetID[0]=="C" & targetID[1] == draggedLoc[1]-1 & document.getElementById(targetID).hasChildNodes() == false){
                        return temp2;
                    }
                }
            }
            if(draggedLoc[0] == "D"){
                temp = "D" +(parseInt(draggedLoc[1])+1).toString();
                temp2 = "darkPawn"+(parseInt(draggedLoc[1])+1).toString();
                if(enPassantdarkPawn[draggedLoc[1]] == 1 & document.getElementById(temp2).parentElement.id == temp){
                    if(targetID[0]=="C" & targetID[1] == parseInt(draggedLoc[1])+1 & document.getElementById(targetID).hasChildNodes() == false){
                        return temp2;
                    }
                }
            }
            if(draggedLoc[0] == "E"){
                temp = "E" +(draggedLoc[1]-1).toString();
                temp2 = "lightPawn"+(draggedLoc[1]-1).toString();
                if(enPassantlightPawn[draggedLoc[1]-2] == 1 & document.getElementById(temp2).parentElement.id == temp){
                    if(targetID[0]=="F" & targetID[1] == draggedLoc[1]-1 & document.getElementById(targetID).hasChildNodes() == false){
                        return temp2;
                    }
                }
            }
            if(draggedLoc[0] == "E"){
                temp = "E" +(parseInt(draggedLoc[1])+1).toString();
                temp2 = "lightPawn"+(parseInt(draggedLoc[1])+1).toString();
                if(enPassantlightPawn[draggedLoc[1]] == 1 & document.getElementById(temp2).parentElement.id == temp){
                    if(targetID[0]=="F" & targetID[1] == parseInt(draggedLoc[1])+1 & document.getElementById(targetID).hasChildNodes() == false){
                        return temp2;
                    }
                }
            }
            return false;
        }

        //checks and ensures turn order
        function turn() {
            if (turnCount % 2 == 0 & /light/.test(draggedPiece) == true) {
                if (/light/.test(targetPiece)) {
                    return false;
                }
                return true;
            }
            if (turnCount % 2 == 1 & /dark/.test(draggedPiece) == true) {
                if (/dark/.test(targetPiece)) {
                    return false;
                }
                return true;
            }
            return false;
        }

        //check correct light pawn movement
        function lightPawnMove(targetID) {
            //eat
            if (Math.abs(targetID[1] - draggedLoc[1]) == 1 & yAxis.search(draggedLoc[0]) - 1 == yAxis.search(targetID[0]) & document.getElementById(targetID).hasChildNodes() == true) {
                return true;
            }
            //en passant eat
            if(enPassantEat(targetID) != false){    
                return true;
            }
            if (targetID[1] == draggedLoc[1]) {
                //move 2 forward at start
                if (draggedLoc[0] == "G" & targetID[0] == "E") {
                    return true;
                }
                //move 1 forward
                if (yAxis.search(draggedLoc[0]) - 1 == yAxis.search(targetID[0])) {
                    if (document.getElementById(targetID).hasChildNodes() == true) {
                        //blocked
                        return false;
                    }
                    return true;
                }
            }
        }

        //check correct rook movement
        function RookMove(targetID) {
            //check corrent movement
            if (targetID[1] == draggedLoc[1] || draggedLoc[0] == targetID[0]) {
                //check if no piece is blocking on horizontal movement
                if (draggedLoc[0] == targetID[0]) {
                    var min = parseInt(Math.min(targetID[1], draggedLoc[1]));
                    var max = parseInt(Math.max(targetID[1], draggedLoc[1]));
                    for (let x = min + 1; x < max; x++) {
                        var element = draggedLoc[0] + x;
                        if (document.getElementById(element).hasChildNodes() == true) {
                            return false;
                        }
                    }
                }
                //check if no piece is blocking on vertical movement
                if (draggedLoc[1] == targetID[1]) {
                    var min = Math.min(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                    var max = Math.max(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                    for (let x = min + 1; x < max; x++) {
                        var element = yAxis[x] + draggedLoc[1];
                        if (document.getElementById(element).hasChildNodes() == true) {
                            return false;
                        }
                    }
                }
                return true;
            }
        }

        //check correct bishop movement
        function BishopMove(targetID) {
            //check correct movement
            if (Math.abs(targetID[1] - draggedLoc[1]) == Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0]))) {
                //check if no piece is blocking
                var minx = parseInt(Math.min(targetID[1], draggedLoc[1]));
                var maxx = parseInt(Math.max(targetID[1], draggedLoc[1]));
                var miny = Math.min(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                var maxy = Math.max(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                var temp = 0;
                var addx = 1;
                var addy = 1;
                if (draggedLoc[1] > targetID[1]) {
                    temp = minx;
                    minx = maxx;
                    maxx = temp;
                    addx = -1;
                }
                if (yAxis.search(draggedLoc[0]) > yAxis.search(targetID[0])) {
                    temp = miny;
                    miny = maxy;
                    maxy = temp;
                    addy = -1;
                }
                for (let x = 1; x < Math.abs(minx - maxx); x++) {
                    temp = minx + addx;
                    var element = yAxis[miny + addy] + temp;
                    if (document.getElementById(element).hasChildNodes() == true) {
                        return false;
                    }
                }
                return true;
            }
        }

        //check correct queen movement
        function QueenMove(targetID) {
            //check correct movement
            if (Math.abs(targetID[1] - draggedLoc[1]) == Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0])) || targetID[1] == draggedLoc[1] || draggedLoc[0] == targetID[0]) {
                if (Math.abs(targetID[1] - draggedLoc[1]) == Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0]))) {
                    //check if no piece is blocking diagonally
                    var minx = parseInt(Math.min(targetID[1], draggedLoc[1]));
                    var maxx = parseInt(Math.max(targetID[1], draggedLoc[1]));
                    var miny = Math.min(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                    var maxy = Math.max(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                    var temp = 0;
                    var addx = 1;
                    var addy = 1;
                    if (draggedLoc[1] > targetID[1]) {
                        temp = minx;
                        minx = maxx;
                        maxx = temp;
                        addx = -1;
                    }
                    if (yAxis.search(draggedLoc[0]) > yAxis.search(targetID[0])) {
                        temp = miny;
                        miny = maxy;
                        maxy = temp;
                        addy = -1;
                    }
                    for (let x = 1; x < Math.abs(minx - maxx); x++) {
                        temp = minx + addx;
                        var element = yAxis[miny + addy] + temp;
                        if (document.getElementById(element).hasChildNodes() == true) {
                            return false;
                        }
                    }
                }
                if (targetID[1] == draggedLoc[1] || draggedLoc[0] == targetID[0]) {
                    //check if no piece is blocking on horizontal movement
                    if (draggedLoc[0] == targetID[0]) {
                        var min = parseInt(Math.min(targetID[1], draggedLoc[1]));
                        var max = parseInt(Math.max(targetID[1], draggedLoc[1]));
                        for (let x = min + 1; x < max; x++) {
                            var element = draggedLoc[0] + x;
                            if (document.getElementById(element).hasChildNodes() == true) {
                                return false;
                            }
                        }
                    }
                    //check if no piece is blocking on vertical movement
                    if (draggedLoc[1] == targetID[1]) {
                        var min = Math.min(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                        var max = Math.max(yAxis.search(draggedLoc[0]), yAxis.search(targetID[0]));
                        for (let x = min + 1; x < max; x++) {
                            var element = yAxis[x] + draggedLoc[1];
                            if (document.getElementById(element).hasChildNodes() == true) {
                                return false;
                            }
                        }
                    }
                }
                return true;
            }
        }

        //check correct king movement
        function KingMove(targetID) {
            //check and allow castling movement
            if (/light/.test(draggedPiece) & lightKingCastle == 0 & lightRook1Castle == 0 & targetID == 'H3') {
                if (document.getElementById("H2").children.length == 0 & document.getElementById("H3").children.length == 0 & document.getElementById("H4").children.length == 0) {
                    castleCode = "H4";
                    return true;
                }
            }
            if (/light/.test(draggedPiece) & lightKingCastle == 0 & lightRook2Castle == 0 & targetID == 'H7') {
                if (document.getElementById("H6").children.length == 0 & document.getElementById("H7").children.length == 0) {
                    castleCode = "H6";
                    return true;
                }
            }
            if (/dark/.test(draggedPiece) & darkKingCastle == 0 & darkRook1Castle == 0 & targetID == 'A3') {
                if (document.getElementById("A2").children.length == 0 & document.getElementById("A3").children.length == 0 & document.getElementById("A4").children.length == 0) {
                    castleCode = "A4";
                    return true;
                }
            }
            if (/dark/.test(draggedPiece) & darkKingCastle == 0 & darkRook2Castle == 0 & targetID == 'A7') {
                if (document.getElementById("A6").children.length == 0 & document.getElementById("A7").children.length == 0) {
                    castleCode = "A6";
                    return true;
                }
            }
            //check correct movement
            if ((Math.abs(targetID[1] - draggedLoc[1]) == 1 || Math.abs(targetID[1] - draggedLoc[1]) == 0) & (Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0])) == 1 || Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0])) == 0)) {
                return true;
            }
        }

        //check correct knight movement
        function KnightMove(targetID) {
            if ((Math.abs(targetID[1] - draggedLoc[1]) == 2 & Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0])) == 1) || (Math.abs(targetID[1] - draggedLoc[1]) == 1 & Math.abs(yAxis.search(draggedLoc[0]) - yAxis.search(targetID[0])) == 2)) {
                return true;
            }
        }

        //check correct darkpawn movement
        function darkPawnMove(targetID) {
            //eat
            if (Math.abs(targetID[1] - draggedLoc[1]) == 1 & yAxis.search(draggedLoc[0]) + 1 == yAxis.search(targetID[0]) & document.getElementById(targetID).hasChildNodes() == true) {
                return true;
            }
            //en passant eat
            if(enPassantEat(targetID) != false){    
                return true;
            }
            if (targetID[1] == draggedLoc[1]) {
                //move 2 forward at start
                if (draggedLoc[0] == "B" & targetID[0] == "D") {
                    return true;
                }
                //move 1 forward
                if (yAxis.search(draggedLoc[0]) + 1 == yAxis.search(targetID[0])) {
                    //blocked
                    if (document.getElementById(targetID).hasChildNodes() == true) {
                        return false;
                    }
                    return true;
                }
            }
        }

        function initialize() {
            //resets the board
            location.reload();
        }

        //checks if the pieces are moving correctly
        function check(ev) {
            //ensures proper movement of piece
            if (/lightPawn/.test(draggedPiece) == true) {
                if (lightPawnMove(ev) == true) {
                    return 1;
                }
            }

            if (/Rook/.test(draggedPiece) == true) {
                if (RookMove(ev) == true) {
                    return 1;
                }
            }

            if (/Bishop/.test(draggedPiece) == true) {
                if (BishopMove(ev) == true) {
                    return 1;
                }
            }

            if (/Queen/.test(draggedPiece) == true) {
                if (QueenMove(ev) == true) {
                    return 1;
                }
            }

            if (/King/.test(draggedPiece) == true) {
                if (KingMove(ev) == true) {
                    return 1;
                }
            }

            if (/Knight/.test(draggedPiece) == true) {
                if (KnightMove(ev) == true) {
                    return 1;
                }
            }

            if (/darkPawn/.test(draggedPiece) == true) {
                if (darkPawnMove(ev) == true) {
                    return 1;
                }
            }
            return 0;
        }

        function allowDrop(ev) {
            //makes sure dragged object doesnt point to itself
            if (draggedPiece != ev.target.id) {
                var temp = ev.target.id;
                //ensures target is container, not the piece
                targetPiece = "";
                if (/dark/.test(ev.target.id) || /light/.test(ev.target.id)) {
                    targetPiece = ev.target.id;
                    temp = document.getElementById(targetPiece).parentElement.id;
                }
                if (check(temp) === 1) {
                    if (turn() == true) {
                        //allows drop when movement is correct
                        ev.preventDefault();
                    }
                }
            }
        }

        function drag(ev, id) {
            //set global variables
            draggedLoc = document.getElementById(id).parentElement.id;
            draggedPiece = id;
            //prepares for data transfer
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            //if rook or king is dragged, disables castling
            castling();
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            //if en passant conditions are met and en passant is performed
            enPassant(ev.target.id);
            if(enPassantEat(ev.target.id) != false){
                document.getElementById(document.getElementById(enPassantEat(ev.target.id)).parentElement.id).removeChild(document.getElementById(enPassantEat(ev.target.id)));
            }
            //if target is a piece, replaces piece with the dragged piece, else data transfer
            if (/dark/.test(targetPiece) || /light/.test(targetPiece)) {
                let temp = document.getElementById(targetPiece).parentElement.id;
                document.getElementById(temp).removeChild(document.getElementById(targetPiece));
                document.getElementById(temp).appendChild(document.getElementById(data));
            } else {
                ev.target.appendChild(document.getElementById(data));
            }
            //increases turn count and changes turn
            turnCount++;
            //if castling conditions are met and castling is performed
            castle();
        }
    </script>
</body>

</html>